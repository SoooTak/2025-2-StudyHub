<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${study.title} + ' - 글 수정 - StudyHub'">글 수정 - StudyHub</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- 전역 화이트 테마 -->
    <link rel="stylesheet" th:href="@{/css/studyhub.css}">

    <!-- 이 페이지 전용 스타일 -->
    <style>
        * { box-sizing: border-box; }

        .edit-main {
            max-width: 1040px;
            margin: 0 auto;
        }

        .form-row {
            display: flex;
            flex-direction: column;
            gap: 4px;
            margin-bottom: 10px;
            font-size: 13px;
        }
        .form-row label { font-weight: 500; }
        .form-row input,
        .form-row textarea {
            padding: 6px 8px;
            border-radius: 6px;
            border: 1px solid #cfd5e8;
            font-size: 13px;
        }
        .form-row textarea {
            min-height: 150px;
            resize: vertical;
        }
        .form-row input:focus,
        .form-row textarea:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 1px rgba(37,99,235,0.12);
        }

        .actions {
            margin-top: 12px;
            display: flex;
            gap: 8px;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 6px 12px;
            border-radius: 999px;
            border: none;
            cursor: pointer;
            font-size: 13px;
        }

        .back-link {
            display: inline-block;
            margin-top: 16px;
            font-size: 13px;
            color: var(--color-primary);
            text-decoration: none;
        }
        .back-link:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>

<!-- 사이트 공통 헤더 -->
<th:block th:replace="fragments/header :: header"></th:block>

<!-- 스터디룸 상단 탭 (게시판 탭 활성화) -->
<header class="room-header">
    <div style="display:flex;align-items:center;gap:14px;">
        <a class="room-brand" th:href="@{|/room/${study.id}|}"
           th:text="${study != null ? study.title : '스터디'}">스터디</a>
        <nav class="room-nav">
            <a th:href="@{|/room/${study.id}|}">홈</a>
            <a th:href="@{|/room/${study.id}/sessions|}">출석</a>
            <a class="active" th:href="@{|/room/${study.id}/board|}">게시판</a>
            <a th:href="@{|/room/${study.id}/files|}">자료실</a>
            <a th:href="@{|/room/${study.id}/members|}">멤버</a>
        </nav>
    </div>
    <div class="room-header-right">
        <span class="role-badge" th:if="${myRole != null}" th:text="${myRole}">MEMBER</span>
        <a class="btn-secondary" th:href="@{/studies}">다른 스터디 둘러보기</a>
    </div>
</header>

<main class="page-container">
    <section class="card edit-main">
        <h2 class="section-title" th:text="${study.title} + ' - 글 수정'">글 수정</h2>

        <form th:action="@{'/room/' + ${study.id} + '/board/' + ${post.id} + '/edit'}"
              method="post"
              th:object="${postForm}">
            <div class="form-row">
                <label for="title">제목</label>
                <input id="title" type="text" th:field="*{title}" required>
            </div>

            <div class="form-row">
                <label>글 종류</label>
                <div th:text="${post.type.name() == 'NOTICE'} ? '공지' : '일반'">일반</div>
            </div>

            <div class="form-row">
                <label for="content">내용</label>
                <textarea id="content" th:field="*{content}" required></textarea>
            </div>

            <div class="actions">
                <button type="submit" class="btn btn-primary">저장</button>
                <a th:href="@{'/room/' + ${study.id} + '/board/' + ${post.id}}"
                   class="btn btn-secondary">취소</a>
            </div>
        </form>

        <a th:href="@{'/room/' + ${study.id} + '/board'}" class="back-link">← 게시판 목록으로 돌아가기</a>
    </section>
</main>
</body>
</html>
