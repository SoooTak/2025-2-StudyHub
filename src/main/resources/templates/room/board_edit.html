<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${study.title} + ' - 글 수정 - StudyHub'">글 수정 - StudyHub</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * { box-sizing: border-box; }
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f7fb;
        }
        a { text-decoration: none; color: inherit; }
        header {
            background-color: #1f3b8f;
            color: #ffffff;
            padding: 12px 20px;
        }
        .header-inner {
            max-width: 1040px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo { font-weight: 700; font-size: 20px; }
        .nav-links {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 14px;
        }
        .nav-links a {
            padding: 6px 10px;
            border-radius: 999px;
        }
        .nav-links a:hover {
            background-color: rgba(255, 255, 255, 0.16);
        }
        .login-email {
            font-size: 13px;
            opacity: 0.9;
        }

        main {
            max-width: 1040px;
            margin: 24px auto;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
            padding: 22px 26px 30px;
        }
        h1 { margin: 0; font-size: 22px; }

        .form-row {
            display: flex;
            flex-direction: column;
            gap: 4px;
            margin-bottom: 10px;
            font-size: 13px;
        }
        .form-row label { font-weight: 500; }
        .form-row input,
        .form-row textarea {
            padding: 6px 8px;
            border-radius: 6px;
            border: 1px solid #cfd5e8;
            font-size: 13px;
        }
        .form-row textarea {
            min-height: 150px;
            resize: vertical;
        }
        .form-row input:focus,
        .form-row textarea:focus {
            outline: none;
            border-color: #1f3b8f;
            box-shadow: 0 0 0 1px rgba(31,59,143,0.12);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 6px 12px;
            border-radius: 999px;
            border: none;
            cursor: pointer;
            font-size: 13px;
        }
        .btn-primary { background-color: #1f3b8f; color: #ffffff; }
        .btn-secondary {
            background-color: #ffffff;
            color: #1f3b8f;
            border: 1px solid #c6cfeb;
        }

        .actions {
            margin-top: 12px;
            display: flex;
            gap: 8px;
        }

        .back-link {
            display: inline-block;
            margin-top: 16px;
            font-size: 13px;
            color: #1f3b8f;
        }

        @media (max-width: 640px) {
            main {
                margin: 0;
                border-radius: 0;
            }
            .header-inner {
                flex-direction: column;
                align-items: flex-start;
                gap: 4px;
            }
        }
    </style>
</head>
<body>
<header>
    <div class="header-inner">
        <div class="logo">
            <a href="/" style="color:#ffffff;">StudyHub</a>
        </div>
        <div class="nav-links">
            <a href="/">홈</a>
            <a href="/studies">스터디 탐색</a>
            <span th:if="${loggedIn}" class="login-email" th:text="${loginEmail}">user@example.com</span>
            <a th:if="${loggedIn}" href="/logout">로그아웃</a>
            <a th:if="${!loggedIn}" href="/login">로그인</a>
            <a th:if="${!loggedIn}" href="/signup">회원가입</a>
        </div>
    </div>
</header>

<main>
    <h1 th:text="${study.title} + ' - 글 수정'">글 수정</h1>

    <form th:action="@{'/room/' + ${study.id} + '/board/' + ${post.id} + '/edit'}"
          method="post"
          th:object="${postForm}">
        <div class="form-row">
            <label for="title">제목</label>
            <input id="title" type="text" th:field="*{title}" required>
        </div>

        <div class="form-row">
            <label>글 종류</label>
            <div th:text="${post.type.name() == 'NOTICE'} ? '공지' : '일반'">일반</div>
        </div>

        <div class="form-row">
            <label for="content">내용</label>
            <textarea id="content" th:field="*{content}" required></textarea>
        </div>

        <div class="actions">
            <button type="submit" class="btn btn-primary">저장</button>
            <a th:href="@{'/room/' + ${study.id} + '/board/' + ${post.id}}"
               class="btn btn-secondary">취소</a>
        </div>
    </form>

    <a th:href="@{'/room/' + ${study.id} + '/board'}" class="back-link">← 게시판 목록으로 돌아가기</a>
</main>
</body>
</html>
