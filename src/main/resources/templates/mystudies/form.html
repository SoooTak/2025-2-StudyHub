<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${pageTitle} + ' - StudyHub'">스터디 설정 - StudyHub</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- 공통 테마 -->
    <link rel="stylesheet" th:href="@{/css/studyhub.css}">

    <!-- 이 페이지 전용 스타일 -->
    <style>
        .study-form-main {
            max-width: 720px;
            margin: 24px auto 32px;
            padding: 24px 28px 32px;
            background-color: var(--color-surface);
            border-radius: 16px;
            box-shadow: var(--shadow-card);
        }

        h1 {
            margin-top: 0;
            font-size: 22px;
        }

        .description {
            margin-top: 4px;
            font-size: 14px;
            color: var(--color-text-muted);
        }

        form {
            margin-top: 18px;
        }

        .form-row {
            margin-bottom: 14px;
        }

        label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        input[type="text"],
        input[type="number"],
        textarea {
            width: 100%;
            padding: 8px 10px;
            border-radius: 8px;
            border: 1px solid var(--color-border-subtle);
            font-size: 14px;
        }

        textarea {
            min-height: 120px;
            resize: vertical;
        }

        .hint {
            font-size: 12px;
            color: var(--color-text-muted);
            margin-top: 2px;
        }

        .inline {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .inline label {
            margin-bottom: 0;
            font-weight: 500;
        }

        .checkbox-label {
            font-size: 13px;
            font-weight: 500;
        }

        .actions {
            margin-top: 18px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .btn-primary {
            padding: 8px 16px;
            border-radius: 999px;
            border: none;
            background-color: var(--color-primary);
            color: #ffffff;
            font-size: 14px;
            cursor: pointer;
        }

        .btn-primary:hover {
            background-color: var(--color-primary-strong);
        }

        .btn-secondary {
            padding: 6px 12px;
            border-radius: 999px;
            border: 1px solid var(--color-border-subtle);
            background-color: #ffffff;
            color: var(--color-text-main);
            font-size: 13px;
            cursor: pointer;
            text-decoration: none;
        }

        .btn-secondary:hover {
            border-color: var(--color-primary);
            color: var(--color-primary);
        }

        @media (max-width: 640px) {
            .study-form-main {
                margin: 16px;
                padding: 20px 16px 24px;
            }
        }
    </style>
</head>
<body>
    <!-- 공통 헤더 -->
    <th:block th:replace="fragments/header :: header"></th:block>

    <div class="page-container">
        <main class="study-form-main">
            <h1 th:text="${pageTitle}">스터디 설정</h1>
            <p class="description">
                스터디 제목, 소개, 카테고리, 최대 인원, 공개 여부를 설정할 수 있습니다.
                <br th:if="${mode == 'create'}">
                <span th:if="${mode == 'create'}" style="font-size: 13px;">
                    스터디를 개설하면 현재 계정이 자동으로 리더(개설자)로 등록됩니다.
                </span>
            </p>

            <form th:object="${form}"
                  th:action="${mode} == 'edit' ? @{'/my/studies/' + ${form.id} + '/edit'} : @{/my/studies/new}"
                  method="post">

                <div class="form-row">
                    <label for="title">스터디 제목</label>
                    <input type="text" id="title" th:field="*{title}" placeholder="예: 알고리즘 스터디">
                    <div class="hint">나중에 언제든지 수정할 수 있습니다.</div>
                </div>

                <div class="form-row">
                    <label for="description">스터디 소개</label>
                    <textarea id="description" th:field="*{description}"
                              placeholder="스터디 목표, 진행 방식, 시간 등을 간단히 적어주세요."></textarea>
                </div>

                <div class="form-row">
                    <label for="category">카테고리</label>
                    <input type="text" id="category" th:field="*{category}"
                           placeholder="예: 알고리즘, 토익, CS, 자격증 등">
                    <div class="hint">단순 텍스트입니다. 추후 카테고리 필터 기능을 만들 때 활용할 수 있습니다.</div>
                </div>

                <div class="form-row">
                    <label for="maxMembers">최대 인원 수</label>
                    <input type="number" id="maxMembers" min="1" th:field="*{maxMembers}">
                    <div class="hint">1 이상 숫자로 입력해주세요. 입력하지 않으면 기본값 10명이 적용됩니다.</div>
                </div>

                <div class="form-row">
                    <div class="inline">
                        <input type="checkbox" id="open" th:field="*{open}">
                        <label for="open" class="checkbox-label">공개 스터디로 설정</label>
                    </div>
                    <div class="hint">
                        공개 스터디는 스터디 탐색 목록에 노출됩니다. 비공개 스터디는 직접 링크를 아는 사람만 접근할 수 있습니다.
                    </div>
                </div>

                <div class="actions">
                    <a th:href="@{/my/studies}" class="btn-secondary">← 내 스터디 목록으로</a>
                    <button type="submit" class="btn-primary"
                            th:text="${mode} == 'edit' ? '수정 완료' : '스터디 개설하기'">
                        스터디 개설하기
                    </button>
                </div>
            </form>
        </main>
    </div>
</body>
</html>
